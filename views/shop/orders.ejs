<%- include('../includes/head.ejs') %>
</head>
<body>
    <%- include('../includes/navigation.ejs') %>
    <div class="container mt-4">
        <% if (orders.length <= 0) { %>
            <div class="alert alert-info text-center">Nothing there!</div>
        <% } else { %>
            <div class="accordion" id="ordersAccordion">
                <% orders.forEach((order, index) => { %>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading<%= index %>">
                            <button class="accordion-button <%= index === 0 ? '' : 'collapsed' %>" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= index %>">
                                Order #<%= order._id %> - Total: $<%= order.totalPrice %>
                            </button>
                        </h2>
                        <div id="collapse<%= index %>" class="accordion-collapse collapse <%= index === 0 ? 'show' : '' %>">
                            <div class="accordion-body">
                                <ul class="list-group">
                                    <% order.items.forEach(item => { %>
                                        <li class="list-group-item d-flex justify-content-between">
                                            <span><%= item.product.title %></span>
                                            <span class="badge bg-primary rounded-pill"><%= item.quantity %></span>
                                        </li>
                                    <% }); %>
                                </ul>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        <% } %>
    </div>
    <%- include('../includes/end.ejs') %>